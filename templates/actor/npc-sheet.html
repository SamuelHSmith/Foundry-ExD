<form class="{{cssClass}} flexcol character-sheet-background" autocomplete="off">
    <header class="sheet-header">
        <div class="profile-img-wrapper">
            <img class="profile-img" src="{{actor.img}}" data-edit="img" title="{{actor.name}}" height="100"
                width="100" />
            <div class="flex-center">
                <label class="resource-label">{{localize "ExD.Essence"}}</label>
                <input type="number" name="system.essence.value" value="{{system.essence.value}}" data-dtype="Number" />
            </div>
            <div class="check-button">
                <label class="resource-label">{{localize "ExD.Battlegroup"}}:</label>
                <input data-dtype="Boolean" name="system.battlegroup" type="checkbox" {{checked system.battlegroup}}>
            </div>
            <div class="check-button">
                <label class="resource-label">{{localize "ExD.LegendarySize"}}:</label>
                <input data-dtype="Boolean" name="system.legendarysize" type="checkbox" {{checked
                    system.legendarysize}}>
            </div>
        </div>
        <div class="header-fields">
            <div>
                <h1 class="charname"><input name="name" type="text" value="{{actor.name}}"
                        placeholder="{{localize 'ExD.NameTitle'}}" /></h1>
            </div>
            <div class="grid grid-3col flexrow">
                <h1 class="charname"> <select name="system.creaturetype" data-type="String">
                        {{#select system.creaturetype}}
                        <option value="animal">{{localize "ExD.Animal"}}</option>
                        <option value="behemoth">{{localize "ExD.Behemoth"}}</option>
                        <option value="construct">{{localize "ExD.Construct"}}</option>
                        <option value="demon">{{localize "ExD.Demon"}}</option>
                        <option value="elemental">{{localize "ExD.Elemental"}}</option>
                        <option value="exalt">{{localize "ExD.Exalt"}}</option>
                        <option value="fae">{{localize "ExD.Fae"}}</option>
                        <option value="god">{{localize "ExD.God"}}</option>
                        <option value="magiccreature">{{localize "ExD.MagicCreature"}}</option>
                        <option value="mortal">{{localize "ExD.Mortal"}}</option>
                        <option value="undead">{{localize "ExD.Undead"}}</option>
                        <option value="wyldmonster">{{localize "ExD.WyldMonster"}}</option>
                        <option value="other">{{localize "ExD.Other"}}</option>
                        {{/select}}
                    </select></h1>
                {{#ifEquals system.creaturetype 'demon'}}
                <h1 class="charname"> <select name="system.details.exalt" data-type="String">
                        {{#select system.details.exalt}}
                        <option value="first">{{localize "ExD.First"}} {{localize "ExD.Circle"}}</option>
                        <option value="second">{{localize "ExD.Second"}} {{localize "ExD.Circle"}}</option>
                        <option value="demake">{{localize "ExD.Demake"}} {{localize "ExD.Circle"}}</option>
                        {{/select}}
                    </select></h1>
                {{/ifEquals}}

                {{#ifEquals system.creaturetype 'exalt'}}
                <h1 class="charname"> <select name="system.details.exalt" data-type="String">
                        {{#select system.details.exalt}}
                        <option value="abyssal">{{localize "ExD.Abyssal"}}</option>
                        <option value="alchemical">{{localize "ExD.Alchemical"}}</option>
                        <option value="dragonblooded">{{localize "ExD.Dragonblooded"}}</option>
                        <option value="dreamsouled">{{localize "ExD.DreamSouled"}}</option>
                        <option value="exigent">{{localize "ExD.Exigent"}}</option>
                        <option value="getimian">{{localize "ExD.Getimian"}}</option>
                        <option value="hearteater">{{localize "ExD.Hearteater"}}</option>
                        <option value="infernal">{{localize "ExD.Infernal"}}</option>
                        <option value="liminal">{{localize "ExD.Liminal"}}</option>
                        <option value="lunar">{{localize "ExD.Lunar"}}</option>
                        <option value="sidereal">{{localize "ExD.Sidereal"}}</option>
                        <option value="solar">{{localize "ExD.Solar"}}</option>
                        <option value="umbral">{{localize "ExD.Umbral"}}</option>
                        <option value="other">{{localize "ExD.Other"}}</option>
                        {{/select}}
                    </select></h1>
                <h1 class="charname"><input name="system.details.caste" type="text" value="{{system.details.caste}}"
                        placeholder="{{localize 'ExD.CasteAspect'}}" /></h1>
                {{/ifEquals}}

                {{#ifEquals system.creaturetype 'fae'}}
                <h1 class="charname"> <select name="system.details.exalt" data-type="String">
                        {{#select system.details.exalt}}
                        <option value="creature">{{localize "ExD.Creature"}}</option>
                        <option value="raksha">{{localize "ExD.Raksha"}}</option>
                        {{/select}}
                    </select></h1>
                {{/ifEquals}}
            </div>
            <div class="resources grid grid-4col">
                <div class="flex-center">
                    <div style="margin-bottom:3px;">
                        <label class="resource-label">{{localize "ExD.Personal"}} {{#ifEquals system.creaturetype
                            'exalt'}} <i class="fas fa-calculator calculate-personal-motes cursor-pointer"
                                title="Auto Set Motes"></i> {{/ifEquals}}</label>
                        <div class="resource-content flexrow flex-center flex-between">
                            <input type="number" name="system.motes.personal.value"
                                value="{{system.motes.personal.value}}" data-dtype="Number" />
                            /
                            <input type="number" name="system.motes.personal.max" value="{{system.motes.personal.max}}"
                                data-dtype="Number" />
                        </div>
                    </div>
                    <div>
                        <label class="resource-label">{{localize "ExD.Committed"}}</label>
                        <input type="number" name="system.motes.personal.committed"
                            value="{{system.motes.personal.committed}}" data-dtype="Number" />
                    </div>
                </div>
                <div class="flex-center">
                    <div style="margin-bottom:3px;">
                        <label class="resource-label">{{localize "ExD.Peripheral"}} {{#ifEquals system.creaturetype
                            'exalt'}} <i class="fas fa-calculator calculate-peripheral-motes cursor-pointer"
                                title="Auto Set Motes"></i> {{/ifEquals}}</label>
                        <div class="resource-content flexrow flex-center flex-between">
                            <input type="number" name="system.motes.peripheral.value"
                                value="{{system.motes.peripheral.value}}" data-dtype="Number" />
                            /
                            <input type="number" name="system.motes.peripheral.max"
                                value="{{system.motes.peripheral.max}}" data-dtype="Number" />
                        </div>
                    </div>
                    <div>
                        <label class="resource-label">{{localize "ExD.Committed"}}</label>
                        <input type="number" name="system.motes.peripheral.committed"
                            value="{{system.motes.peripheral.committed}}" data-dtype="Number" />
                    </div>
                </div>
                <div class="resource-content flexrow flex-center flex-between">
                    <div>
                        <i id="anima-down" class="fas fa-caret-down cursor-pointer"></i><label
                            class="resource-label">{{localize
                            "ExD.Anima"}}</label><i id="anima-up" class="fas fa-caret-up cursor-pointer"></i>
                        <div>{{system.anima.level}}</div>
                    </div>
                </div>
                <div class="resource-content flexrow flex-center flex-between">
                    {{#ifEquals system.details.exalt 'getimian'}}
                    <div>
                        <label class="resource-label">{{localize "ExD.Flowing"}}</label>
                        <div class="resource-content flexrow flex-center flex-between">
                            <input type="number" name="system.flowing.value" value="{{system.flowing.value}}"
                                data-dtype="Number" />
                            /
                            <input type="number" name="system.flowing.total" value="{{system.flowing.total}}"
                                data-dtype="Number" />
                        </div>
                    </div>
                    <div>
                        <label class="resource-label">{{localize "ExD.Still"}}</label>
                        <div class="resource-content flexrow flex-center flex-between">
                            <input type="number" name="system.still.value" value="{{system.still.value}}"
                                data-dtype="Number" />
                            /
                            <input type="number" name="system.still.total" value="{{system.still.total}}"
                                data-dtype="Number" />
                        </div>
                    </div>
                    {{/ifEquals}}
                    {{#ifEquals system.details.exalt 'solar'}}
                    <div>
                        <label class="resource-label">{{localize "ExD.Supernal"}}</label>
                        <input type="text" name="system.details.supernal" value="{{system.details.supernal}}" />
                    </div>
                    {{/ifEquals}}
                    {{#ifEquals system.details.exalt 'lunar'}}
                    <div>
                        <label class="resource-label">{{localize "ExD.Tell"}}</label>
                        <input type="text" name="system.details.tell" value="{{system.details.tell}}" />
                    </div>
                    {{/ifEquals}}
                    {{#ifEquals system.details.exalt 'dragonblooded'}}
                    <div>
                        <div class="resource-label">{{localize "ExD.Aura"}}</div>
                        <select name="system.details.aura" data-type="String">
                            {{#select system.details.aura}}
                            <option value="none">{{localize "ExD.None"}}</option>
                            <option value="air">{{localize "ExD.Air"}}</option>
                            <option value="earth">{{localize "ExD.Earth"}}</option>
                            <option value="fire">{{localize "ExD.Fire"}}</option>
                            <option value="water">{{localize "ExD.Water"}}</option>
                            <option value="wood">{{localize "ExD.Wood"}}</option>
                            {{/select}}
                        </select>
                    </div>
                    {{/ifEquals}}
                    {{#ifEquals system.details.exalt 'umbral'}}
                    <div>
                        <label class="resource-label">{{localize "ExD.Penumbra"}}</label>
                        <input type="number" name="system.details.penumbra.value"
                            value="{{system.details.penumbra.value}}" />
                    </div>
                    {{/ifEquals}}
                </div>
            </div>
            <div class="resources flex-center">
                <div>
                    <label class="resource-label">{{localize "ExD.Willpower"}}</label>
                    <div class="resource-content flexrow flex-center flex-between">
                        <input type="number" name="system.willpower.value" value="{{system.willpower.value}}"
                            data-dtype="Number" />/
                        <input type="number" name="system.willpower.max" value="{{system.willpower.max}}"
                            data-dtype="Number" />
                    </div>
                </div>
            </div>
        </div>
    </header>

    <nav class="sheet-tabs tabs" data-group="primary">
        <a class="item" data-tab="stats">{{localize "ExD.Stats"}}</a>
        <a class="item" data-tab="combat">{{localize "ExD.Combat"}}</a>
        <a class="item" data-tab="social">{{localize "ExD.Social"}}</a>
        <a class="item" data-tab="charms">{{localize "ExD.Charms"}}/{{localize "ExD.Spells"}}</a>
        <a class="item" data-tab="effects">{{localize "ExD.Effects"}}</a>
        <a class="item" data-tab="description">{{localize "ExD.Description"}}</a>
    </nav>

    <section class="sheet-body">
        <div class="tab flex-center" data-group="primary" data-tab="stats">
            <div style="padding-top:10px;">
                <label class="resource-label">{{localize "ExD.Actions"}}</label>
                <a class="item-control item-create" title="Create action" data-type="action"><i
                        class="fas fa-plus"></i></a>
            </div>
            <div class="attributes grid grid-3col flex-group-center">
                {{#if system.settings.showzerovalues}}
                {{#each system.pools as |pool key|}}
                <div class="pool flex-center">
                    <label for="system.pools.{{key}}.value" class="resource-label vrollable roll-pool"
                        data-roll="{{pool.value}}" data-pool="{{key}}" data-label="{{pool.name}}">{{localize
                        pool.name}}</label>
                    <input type="number" name="system.pools.{{key}}.value" value="{{pool.value}}" data-dtype="Number" />
                </div>
                {{/each}}
                {{else}}
                {{#each system.pools as |pool key|}}
                {{#ifGreater pool.value 0}}
                <div class="pool flex-center">
                    <label for="system.pools.{{key}}.value" class="resource-label vrollable roll-pool"
                        data-roll="{{pool.value}}" data-pool="{{key}}" data-label="{{pool.name}}">{{localize
                        pool.name}}</label>
                    <input type="number" name="system.pools.{{key}}.value" value="{{pool.value}}" data-dtype="Number" />
                </div>
                {{/ifGreater}}
                {{/each}}
                {{/if}}
                {{#each actor.actions as |action key|}}
                <div class="item flex-center" data-item-id="{{action._id}}">
                    <label class="resource-label roll-action">{{action.name}}</label>
                    <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                    <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                    <input class="npc-action" type="number" name="action.system.value" value="{{action.system.value}}"
                        data-dtype="Number" />
                </div>
                {{/each}}
            </div>
            {{#if system.settings.showescort}}
            <div>
                <label class="resource-label">{{localize "ExD.Escort"}}</label>
                <textarea type="text" name="system.escort" rows="6">{{system.escort}}</textarea>
            </div>
            {{/if}}
            <div>
                <label class="resource-label">{{localize "ExD.Qualities"}}</label>
                <textarea type="text" name="system.qualities" rows="12">{{system.qualities}}</textarea>
            </div>
        </div>

        {{!-- Combat Tab --}}
        <div class="tab flex-center" data-group="primary" data-tab="combat">
            {{> systems/exalteddemake/templates/actor/combat-tab.html}}
        </div>
        {{!-- Charms Tab --}}
        <div class="tab items" data-group="primary" data-tab="charms">
            <ol class="items-list">
                <div class="resource-label list-section-header d-flex flex-between">
                    <div>
                        {{localize "ExD.SpecialAbilities"}}
                    </div>
                    <a class="item-control item-create" title="Create specialability" data-type="specialability"><i
                            class="fas fa-plus"></i>Add S-Ability</a>
                </div>
                {{#each actor.specialabilities as |item id|}}
                <li class="item flexrow item-row" data-item-id="{{item._id}}">
                    <div class="item-image"><img class="list-item-image" src="{{item.img}}" title="{{item.name}}"
                            width="24" height="24" />
                    </div>
                    <h4 class="item-name">{{item.name}}</h4>
                    <div class="item-controls">
                        <a class="item-control item-chat" title="Chat Item"><i class="fas fa-comment"></i></a>
                        <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                        <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                    </div>
                </li>
                <li class="item-description">
                    <div>
                        {{{item.system.description}}}
                    </div>
                </li>
                {{/each}}
                {{> systems/exalteddemake/templates/actor/charm-list.html}}
                <div class="resource-label list-section-header d-flex flex-between">
                    <div>
                        {{localize "ExD.Initiations"}}
                    </div>
                    <a class="item-control item-create" title="Create initiation" data-type="initiation"><i
                            class="fas fa-plus"></i>Add Initiation</a>
                </div>
                {{#each actor.initiations as |item id|}}
                <li class="item flexrow item-row" data-item-id="{{item._id}}">
                    <div class="item-image"><img class="list-item-image" src="{{item.img}}" title="{{item.name}}"
                            width="24" height="24" />
                    </div>
                    <h4 class="item-name">{{item.name}}</h4>
                    <div class="item-controls">
                        <a class="item-control item-chat" title="Chat Item"><i class="fas fa-comment"></i></a>
                        <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                        <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                    </div>
                </li>
                <li class="item-description">
                    <div>
                        {{{item.system.description}}}
                    </div>
                </li>
                {{/each}}
                <div class="resource-label list-section-header d-flex flex-between">
                    <div>
                        {{localize "ExD.Merits"}}
                    </div>
                    <a class="item-control item-create" title="Create merit" data-type="merit"><i
                            class="fas fa-plus"></i>Add Merit</a>
                </div>
                {{#each actor.merits as |item id|}}
                <li class="item flexrow item-row" data-item-id="{{item._id}}">
                    <div class="item-image"><img class="list-item-image" src="{{item.img}}" title="{{item.name}}"
                            width="24" height="24" />
                    </div>
                    <h4 class="item-name">{{item.name}}</h4>
                    <div class="item-controls">
                        <a class="item-control item-chat" title="Chat Item"><i class="fas fa-comment"></i></a>
                        <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                        <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                    </div>
                </li>
                <li class="item-description">
                    <div>
                        {{{item.system.description}}}
                    </div>
                </li>
                {{/each}}
            </ol>
        </div>

        <div class="tab effects" data-group="primary" data-tab="effects">
            <div class="resource-label list-section-header d-flex flex-between">
                <div>
                    {{localize "ExD.SavedRolls"}}
                </div>
            </div>
            <ol class="items-list">
                {{#each system.savedRolls as |item id|}}
                <li class="item flexrow" data-item-id="{{id}}">
                    <h4 class="item-name">{{item.name}}</h4>
                    <div class="resource-table-value resource-value-static">
                        {{item.rollType}}
                    </div>
                    <div class="item-controls">
                        <a class="item-control quick-roll" title="Roll"><i class="fas fa-dice-d10"></i></a>
                        <a class="item-control saved-roll" title="Roll"><i class="fas fa-edit"></i></a>
                        <a class="item-control delete-saved-roll" title="Delete Item"><i class="fas fa-trash"></i></a>
                    </div>
                </li>
                {{/each}}
            </ol>
            {{> systems/exalteddemake/templates/actor/active-effects.html}}
        </div>

        {{!-- Intimacy Tab --}}
        <div class="tab social" data-group="primary" data-tab="social">
            {{> systems/exalteddemake/templates/actor/social-tab.html}}
        </div>

        {{!-- Biography Tab --}}
        <div class="tab biography" data-group="primary" data-tab="description">
            <ol class="items-list">
                <div class="resource-label list-section-header d-flex flex-between">
                    <div>
                        {{localize "ExD.Items"}}
                    </div>
                    <a class="item-control item-create" title="Create item" data-type="item"><i
                            class="fas fa-plus"></i>Add
                        Item</a>
                </div>
                {{#each actor.gear as |item id|}}
                <li class="item flexrow item-row" data-item-id="{{item._id}}">
                    <div class="item-image"><img class="list-item-image" src="{{item.img}}" title="{{item.name}}"
                            width="24" height="24" /></div>
                    <h4 class="item-name">{{item.name}}</h4>
                    <div class="item-controls">
                        <a class="item-control item-chat" title="Chat Item"><i class="fas fa-comment"></i></a>
                        <a class="item-control item-edit" title="Edit Item"><i class="fas fa-edit"></i></a>
                        <a class="item-control item-delete" title="Delete Item"><i class="fas fa-trash"></i></a>
                    </div>
                </li>
                <li class="item-description">
                    <div>
                        {{{item.system.description}}}
                    </div>
                </li>
                {{/each}}
            </ol>
            <div class="resource-label flex-center">{{localize "ExD.CharacterNotes"}}</div>
            {{editor system.biography target="system.biography" button=true owner=owner editable=true}}
        </div>
    </section>
</form>